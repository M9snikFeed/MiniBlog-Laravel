(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{57:function(t,a,s){"use strict";function e(t,a,s,e,i,o,n,r){var l,c="function"==typeof t?t.options:t;if(a&&(c.render=a,c.staticRenderFns=s,c._compiled=!0),e&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),n?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},c._ssrRegister=l):i&&(l=r?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(c.functional){c._injectStyles=l;var m=c.render;c.render=function(t,a){return l.call(a),m(t,a)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,l):[l]}return{exports:t,options:c}}s.d(a,"a",(function(){return e}))},69:function(t,a,s){"use strict";s.r(a);var e={name:"ModalVue",data:function(){return{email:void 0,password:void 0,mes:"",authForm:"login",admin:!1,nameReg:void 0,passwordReg:void 0,passwordConfReg:void 0,emailReg:void 0,btnActive:!0}},methods:{resetPassword:function(){var t=this;if(this.email)if(this.validEmail(this.email)){var a=new FormData;a.append("email",this.email),api.call("post","/api/forgot-password?email=den4ic2001@gmail.com",a).then((function(){t.mes="Ссылка на восстановление пароля была отправлена на вашу почту"})).catch((function(a){422===a.status?t.mes="Пользователя с таким email-ом не существует":t.mes="Произошла непредвиденная ошибка на сервере"}))}else this.mes="Вы допустили ошибку при вводе Email-а";else this.mes="Поле с email-ом не может быть пустым"},register:function(){var t=this;this.nameReg?this.emailReg?this.validEmail(this.emailReg)?this.passwordReg?this.passwordReg.length<8?this.mes="Минимальная длинна пароля 8 символов":this.passwordConfReg?this.passwordReg===this.passwordConfReg?(this.btnActive=!1,axios.post("/api/register",{email:this.emailReg,password:this.passwordReg,username:this.nameReg}).then((function(a){t.passwordReg=null,t.emailReg=null,t.nameReg=null,t.passwordConfReg=null,t.btnActive=!0,auth.login(a.data.token,a.data.user),Vue.notify({group:"auth",title:"Регистрация",text:"".concat(a.data.user.name,", подтвердите свою почту")}),t.$modal.hide("login")})).catch((function(a){422===a.response.status&&(t.mes="Пользователь с таким email-ом или логином уже зарегистрирован",t.btnActive=!0)}))):this.mes="Пароли не совпадают":this.mes="Поле с повтором пароля не может быть пустым":this.mes="Поле с паролем не может быть пустым":this.mes="Вы допустили ошибку при вводе Email-а":this.mes="Поле с email-ом не может быть пустым":this.mes="Поле с логином не может быть пустым"},login:function(){var t=this;this.email?this.password?(this.btnActive=!1,axios.post("/api/login",{username:this.email,password:this.password}).then((function(a){auth.login(a.data.token,a.data.user),Vue.notify({group:"auth",title:"Авторизация",text:"Добро пожаловать, ".concat(a.data.user.name)}),t.$modal.hide("login"),t.btnActive=!0,t.email=null,t.password=null})).catch((function(a){t.mes="Введен неверный логин или пароль",t.btnActive=!0}))):this.mes="Поле с паролем не может быть пустым":this.mes="Поле с email-ом не может быть пустым"},validEmail:function(t){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}}},i=s(57),o=Object(i.a)(e,(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("modal",{attrs:{name:"login",height:"auto",adaptive:!0}},["login"===t.authForm?s("form",{staticClass:"form-horizontal"},[s("span",{staticClass:"heading"},[t._v("АВТОРИЗАЦИЯ")]),t._v(" "),s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",placeholder:"E-mail"},domProps:{value:t.email},on:{input:function(a){a.target.composing||(t.email=a.target.value)}}}),t._v(" "),s("i",{staticClass:"fa fa-user"})]),t._v(" "),s("div",{staticClass:"form-group help"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Пароль"},domProps:{value:t.password},on:{input:function(a){a.target.composing||(t.password=a.target.value)}}}),t._v(" "),s("a",{attrs:{id:"btn-input-register"},on:{click:function(a){t.authForm="reset"}}},[t._v("Не помню пароль")]),t._v(" "),s("i",{staticClass:"fa fa-lock"}),t._v(" "),s("a",{staticClass:"fa fa-question-circle",attrs:{href:"#"}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"row",staticStyle:{"padding-top":"1rem"}},[s("div",{staticClass:"col"},[t.btnActive?s("span",{staticClass:"btn btn-primary float-left",on:{click:function(a){return t.login()}}},[t._v("ВХОД")]):s("span",{staticClass:"btn btn-primary float-left"},[t._v("...")]),t._v(" "),s("span",{staticClass:"btn btn-primary float-right",on:{click:function(a){t.authForm="register"}}},[t._v("Регистрация")])])])]),t._v(" "),s("p",{staticStyle:{color:"#ffffff"},domProps:{textContent:t._s(t.mes)}})]):t._e(),t._v(" "),"register"===t.authForm?s("form",{staticClass:"form-horizontal"},[s("span",{staticClass:"heading"},[t._v("РЕГИСТРАЦИЯ")]),t._v(" "),s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.nameReg,expression:"nameReg"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Логин"},domProps:{value:t.nameReg},on:{input:function(a){a.target.composing||(t.nameReg=a.target.value)}}}),t._v(" "),s("i",{staticClass:"fa fa-user"})]),t._v(" "),s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.emailReg,expression:"emailReg"}],staticClass:"form-control",attrs:{type:"email",placeholder:"E-mail"},domProps:{value:t.emailReg},on:{input:function(a){a.target.composing||(t.emailReg=a.target.value)}}}),t._v(" "),s("i",{staticClass:"fa fa-user"})]),t._v(" "),s("div",{staticClass:"form-group help"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordReg,expression:"passwordReg"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Пароль"},domProps:{value:t.passwordReg},on:{input:function(a){a.target.composing||(t.passwordReg=a.target.value)}}}),t._v(" "),s("i",{staticClass:"fa fa-lock"}),t._v(" "),s("a",{staticClass:"fa fa-question-circle",attrs:{href:"#"}})]),t._v(" "),s("div",{staticClass:"form-group help"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordConfReg,expression:"passwordConfReg"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Повторите пароль"},domProps:{value:t.passwordConfReg},on:{input:function(a){a.target.composing||(t.passwordConfReg=a.target.value)}}}),t._v(" "),s("i",{staticClass:"fa fa-lock"}),t._v(" "),s("a",{staticClass:"fa fa-question-circle",attrs:{href:"#"}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[t.btnActive?s("span",{staticClass:"btn btn-primary float-left",on:{click:function(a){return t.register()}}},[t._v("Зарегистрироваться")]):s("span",{staticClass:"btn btn-primary float-left"},[t._v("...")]),t._v(" "),s("span",{staticClass:"btn btn-primary float-right",on:{click:function(a){t.authForm="login"}}},[t._v("Авторизация")])])])]),t._v(" "),s("p",{staticStyle:{color:"#ffffff"},domProps:{textContent:t._s(t.mes)}})]):t._e(),t._v(" "),"reset"===t.authForm?s("form",{staticClass:"form-horizontal"},[s("span",{staticClass:"heading"},[t._v("ВОССТАНОВЛЕНИЕ ПАРОЛЯ")]),t._v(" "),s("div",{staticClass:"form-group help"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",placeholder:"Введите свой email"},domProps:{value:t.email},on:{input:function(a){a.target.composing||(t.email=a.target.value)}}}),t._v(" "),s("i",{staticClass:"fa fa-lock"}),t._v(" "),s("a",{staticClass:"fa fa-question-circle",attrs:{href:"#"}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[t.btnActive?s("span",{staticClass:"btn btn-primary float-left",on:{click:function(a){return t.resetPassword()}}},[t._v("Восстановить пароль")]):s("span",{staticClass:"btn btn-primary float-left"},[t._v("...")]),t._v(" "),s("span",{staticClass:"btn btn-primary float-right",on:{click:function(a){t.authForm="login"}}},[t._v("Авторизация")])])])]),t._v(" "),s("p",{staticStyle:{color:"#ffffff"},domProps:{textContent:t._s(t.mes)}})]):t._e()])}),[],!1,null,"26b59ed6",null);a.default=o.exports}}]);