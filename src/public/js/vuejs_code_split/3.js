(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{57:function(t,a,e){"use strict";function n(t,a,e,n,s,i,r,o){var c,l="function"==typeof t?t.options:t;if(a&&(l.render=a,l.staticRenderFns=e,l._compiled=!0),n&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),r?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},l._ssrRegister=c):s&&(c=o?function(){s.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:s),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(t,a){return c.call(a),d(t,a)}}else{var m=l.beforeCreate;l.beforeCreate=m?[].concat(m,c):[c]}return{exports:t,options:l}}e.d(a,"a",(function(){return n}))},62:function(t,a,e){var n=e(64);"string"==typeof n&&(n=[[t.i,n,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};e(4)(n,s);n.locals&&(t.exports=n.locals)},63:function(t,a,e){"use strict";e(62)},64:function(t,a,e){(t.exports=e(3)(!1)).push([t.i,"\n.rating-area[data-v-4a5d6f41] {\n    overflow: hidden;\n    width: 265px;\n    margin: 0 auto;\n}\n.rating-area:not(:checked) > input[data-v-4a5d6f41] {\n    display: none;\n}\n.rating-area:not(:checked) > label[data-v-4a5d6f41] {\n    float: right;\n    width: 42px;\n    padding: 0;\n    cursor: pointer;\n    font-size: 32px;\n    line-height: 32px;\n    color: lightgrey;\n    text-shadow: 1px 1px #bbb;\n}\n.rating-area:not(:checked) > label[data-v-4a5d6f41]:before {\n    content: '\\2605';\n}\n.rating-area > input:checked ~ label[data-v-4a5d6f41] {\n    color: gold;\n    text-shadow: 1px 1px #c60;\n}\n.rating-area:not(:checked) > label[data-v-4a5d6f41]:hover,\n.rating-area:not(:checked) > label:hover ~ label[data-v-4a5d6f41] {\n    color: gold;\n}\n.rating-area > input:checked + label[data-v-4a5d6f41]:hover,\n.rating-area > input:checked + label:hover ~ label[data-v-4a5d6f41],\n.rating-area > input:checked ~ label[data-v-4a5d6f41]:hover,\n.rating-area > input:checked ~ label:hover ~ label[data-v-4a5d6f41],\n.rating-area > label:hover ~ input:checked ~ label[data-v-4a5d6f41] {\n    color: gold;\n    text-shadow: 1px 1px goldenrod;\n}\n.rate-area > label[data-v-4a5d6f41]:active {\n    position: relative;\n}\n.rating-area > p[data-v-4a5d6f41]{\n    padding-left: 40%;\n}\n",""])},72:function(t,a,e){"use strict";e.r(a);var n=e(21),s=e.n(n),i={name:"Article",metaInfo:{title:"Technology Plus | просмотр записи",meta:[{vmid:"description",property:"description",content:"Technology Plus. Главная страница"},{vmid:"og:title",property:"og:title",content:"Technology Plus. Главная страница"},{vmid:"og:description",property:"og:description",content:"Technology Plus. Главная страница"}]},data:function(){return{article:{},recommendArticles:{},author:{},category:{},rating:0,categoriesList:{},loading:!0,comments:[],lastPage:null,thisPage:null,message:"",errorMessage:"",editingComment:null,tags:{},authenticated:auth.check(),user:auth.user}},watch:{$route:function(t,a){this.loading=!0,this.article={},this.loadingArticle(),this.loadCategories(),this.loadRecommendArticles(),scroll(0,0)}},mounted:function(){var t=this;this.loadingArticle(),this.loadCategories(),Event.$on("userLoggedIn",(function(){t.authenticated=!0,t.user=auth.user})),Event.$on("userLogout",(function(){t.authenticated=!1,t.user=null})),this.loadRecommendArticles(),scroll(9,0)},methods:{sendRating:function(t){var a=this;api.call("get","/api/rating/".concat(this.$route.params.id,"?points=").concat(t)).then((function(t){a.rating=t.data.rating.rating}))},loadRecommendArticles:function(){var t=this;api.call("get","/api/article?sort=descending").then((function(a){t.recommendArticles=a.data.articles}))},loadingArticle:function(){var t=this;s.a.get("/api/article/".concat(this.$route.params.id)).then((function(a){t.article=a.data.article,t.author=a.data.author,t.category=a.data.category,t.rating=a.data.rating.rating,a.data.article.tags&&(t.tags=JSON.parse(a.data.article.tags).tags),t.loading=!1,t.webSocketComment(a.data.article.article_id)}))},loadCategories:function(){var t=this;s.a.get("/api/v1/category").then((function(a){t.categoriesList=a.data.data}))},webSocketComment:function(t){var a=this;s.a.get("/api/comment/".concat(t)).then((function(e){a.lastPage=e.data.last_page,a.thisPage=a.lastPage,a.loadCommentsPage(t)})),Echo.channel("comments.".concat(t)).listen(".CreateCommentsEven",(function(t){if(t.comment.author.user_id!==(a.user?a.user.user_id:0))switch(t.method){case"remove":a.removeCommentItem(Number(t.comment.comment_id));break;case"create":a.comments.push(t.comment);break;case"edit":a.comments[a.getCommentItem(t.comment.comment_id)].content=t.comment.content}}))},loadCommentsPage:function(t){var a=this;s.a.get("/api/comment/".concat(t,"?page=").concat(this.lastPage)).then((function(t){a.comments=t.data.data}))},loadBackComments:function(){var t=this;this.thisPage-=1,s.a.get("/api/comment/".concat(this.article.article_id,"?page=").concat(this.thisPage)).then((function(a){var e=t.comments,n=a.data.data;t.comments=n.concat(e)}))},editComment:function(t,a){this.message=t,this.editingComment=a,document.getElementById("message").scrollIntoView()},sendEditComment:function(t){this.comments[this.getCommentItem(t)].content=this.message,api.call("get","/api/comment/".concat(t,"/edit?content=").concat(this.message)),this.editingComment=null,this.message=""},removeCommentItem:function(t){var a=this;this.comments.reduce((function(e,n,s){n.comment_id===t&&a.comments.splice(s,1)}),[])},removeComment:function(t){var a=this;api.call("delete","/api/comment/"+t).then((function(e){a.removeCommentItem(t)}))},getCommentItem:function(t){var a=null;return this.comments.reduce((function(e,n,s){n.comment_id===t&&(a=s)}),[]),a},sendComment:function(){var t=this;window.getCookie("refresh");""!==this.message?(api.call("get","/api/comment/create?content=".concat(this.message,"&articleId=").concat(this.article.article_id)).then((function(a){t.comments.push(a.data[0])})).catch((function(t){403===t.status&&auth.check()})),this.message="",this.errorMessag=null):this.errorMessage="Сообщение не может быть пустым!"}}},r=(e(63),e(57)),o=Object(r.a)(i,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("section",{staticClass:"hero-wrap hero-wrap-2",staticStyle:{"background-image":"url('https://i.pinimg.com/originals/ab/d3/91/abd391cf3428d8d3cb03c7993342ce91.jpg')"}},[e("div",{staticClass:"overlay"}),t._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"row no-gutters slider-text align-items-end justify-content-center"},[e("div",{staticClass:"col-md-9 pb-5 text-center"},[t.loading?e("spinner"):t._e(),t._v(" "),e("h1",{staticClass:"mb-3 bread"},[t._v(t._s(t.article.title))]),t._v(" "),e("p",{staticClass:"breadcrumbs"},[t._m(0),t._v(" "),e("span",[t._v(t._s(t.category.name)),e("i",{staticClass:"ion-ios-arrow-forward"})])])],1)])])]),t._v(" "),e("section",{staticClass:"ftco-section container-content"},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-8 order-lg-last "},[e("div",{staticClass:"content",staticStyle:{"line-height":"1.42"}},[e("span",{staticStyle:{color:"black"},domProps:{innerHTML:t._s(t.article.content)}})]),t._v(" "),e("div",{staticClass:"tag-widget post-tag-container mb-5 mt-5"},[e("div",{staticClass:"tagcloud"},t._l(t.tags,(function(a){return e("a",{staticClass:"tag-cloud-link",attrs:{href:"#"}},[t._v(t._s(a))])})),0)]),t._v(" "),e("div",{staticClass:"rating-area"},[e("p",[t._v("Рейтинг: "+t._s(Math.round(t.rating)))]),t._v(" "),t.authenticated?e("div",{staticClass:"rating-area"},[e("input",{attrs:{type:"radio",id:"star-5",name:"rating"},on:{click:function(a){return t.sendRating(5)}}}),t._v(" "),e("label",{attrs:{for:"star-5",title:"Оценка «5»"}}),t._v(" "),e("input",{attrs:{type:"radio",id:"star-4",name:"rating"},on:{click:function(a){return t.sendRating(4)}}}),t._v(" "),e("label",{attrs:{for:"star-4",title:"Оценка «4»"}}),t._v(" "),e("input",{attrs:{type:"radio",id:"star-3",name:"rating"},on:{click:function(a){return t.sendRating(3)}}}),t._v(" "),e("label",{attrs:{for:"star-3",title:"Оценка «3»"}}),t._v(" "),e("input",{attrs:{type:"radio",id:"star-2",name:"rating"},on:{click:function(a){return t.sendRating(2)}}}),t._v(" "),e("label",{attrs:{for:"star-2",title:"Оценка «2»"}}),t._v(" "),e("input",{attrs:{type:"radio",id:"star-1",name:"rating"},on:{click:function(a){return t.sendRating(1)}}}),t._v(" "),e("label",{attrs:{for:"star-1",title:"Оценка «1»"}})]):e("div",[e("p",{staticClass:"text text-center"},[t._v("Для голосования вы должны авторизоваться")])])]),t._v(" "),e("div",{staticClass:"about-author d-flex p-4 bg-light"},[e("div",{staticClass:"bio mr-5"},[e("img",{staticClass:"img-fluid mb-4",attrs:{src:"/storage/images/avatars/"+t.author.avatar,alt:"Image placeholder",w:""}})]),t._v(" "),e("div",{staticClass:"desc"},[e("h3",[t._v(t._s(t.author.name))]),t._v(" "),e("p",{staticClass:"text-break"},[t._v(t._s(t.author.dec))])])]),t._v(" "),e("div",{staticClass:"pt-5 mt-5"},[e("h3",{staticClass:"mb-5"},[t._v("Комментарии")]),t._v(" "),e("ul",{staticClass:"comment-list"},t._l(t.comments,(function(a){return e("li",[e("div",{staticClass:"vcard bio"},[e("img",{attrs:{src:"/storage/images/avatars/"+a.author.avatar,alt:"Image placeholder"}})]),t._v(" "),e("div",{staticClass:"comment-body"},[e("h3",[e("router-link",{attrs:{to:{name:"user.profile",params:{userId:a.author.user_id}}}},[t._v(t._s(a.author.name))])],1),t._v(" "),e("div",{staticClass:"meta"},[t._v(t._s(a.created_at))]),t._v(" "),e("p",{staticClass:"text-break"},[t._v(t._s(a.content))]),t._v(" "),a.author.user_id===(t.user?t.user.user_id:0)?e("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.editComment(a.content,a.comment_id)}}},[t._v("Редактировать")]):t._e(),t._v(" "),a.author.user_id===(t.user?t.user.user_id:0)?e("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.removeComment(a.comment_id)}}},[t._v("Удалить")]):t._e()])])})),0),t._v(" "),e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",on:{click:function(a){return t.loadBackComments()}}},[t.thisPage>1?e("a",{staticClass:"page-link"},[t._v("Предыдущие комментарии")]):t._e()])]),t._v(" "),t.authenticated||t.user?e("div",{staticClass:"comment-form-wrap pt-5"},[e("form",{staticClass:"p-5 bg-light",attrs:{action:"#"}},[e("div",{staticClass:"form-group"},[t.editingComment?e("label",{attrs:{for:"message"}},[t._v("Редактирование: ")]):e("label",{attrs:{for:"message"}},[t._v("Отправить комментарий: ")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"form-control",attrs:{id:"message",cols:"30",rows:"10"},domProps:{value:t.message},on:{input:function(a){a.target.composing||(t.message=a.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[!t.editingComment&!t.user.banned?e("span",{staticClass:"btn py-3 px-4 btn-primary",on:{click:function(a){return t.sendComment()}}},[t._v("Отправить")]):t._e(),t._v(" "),t.editingComment?e("span",{staticClass:"btn py-3 px-4 btn-primary",on:{click:function(a){return t.sendEditComment(t.editingComment)}}},[t._v("Редактировать")]):t._e(),t._v(" "),t.errorMessage?e("p",{staticStyle:{color:"red"},model:{value:t.errorMessage,callback:function(a){t.errorMessage=a},expression:"errorMessage"}},[t._v("Комментарий не может быть пустым")]):t._e()])])]):t._e()])]),t._v(" "),e("div",{staticClass:"col-lg-4 sidebar pr-lg-5"},[e("div",{staticClass:"sidebar-box"},[e("ul",{staticClass:"categories"},[e("h3",{staticClass:"heading mb-4"},[t._v("Категории")]),t._v(" "),t._l(t.categoriesList,(function(a){return e("li",[e("router-link",{attrs:{to:{name:"Category",params:{id:a.categoryId}}}},[t._v(t._s(a.name))])],1)}))],2)]),t._v(" "),e("div",{staticClass:"sidebar-box "},[e("h3",{staticClass:"heading mb-4"},[t._v("Другие записи")]),t._v(" "),t._l(t.recommendArticles,(function(a){return e("div",{staticClass:"block-21 mb-4 d-flex"},[e("a",{directives:[{name:"lazy-load-background",rawName:"v-lazy-load-background"}],staticClass:"blog-img mr-4",attrs:{"data-src":"/storage/images/articles/"+a.image}}),t._v(" "),e("div",{staticClass:"text"},[e("h3",[e("router-link",{attrs:{to:{name:"article",params:{id:a.article_id}}}},[t._v(t._s(a.title))])],1),t._v(" "),e("div",{staticClass:"meta"},[e("div",[e("a",{attrs:{href:"#"}},[e("span",{staticClass:"icon-calendar"}),t._v(t._s(a.created_at))])]),t._v(" "),e("div",[e("a",{attrs:{href:"#"}},[e("span",{staticClass:"icon-person"}),t._v(" "+t._s(a.author.name))])])])])])}))],2)])])])])])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"mr-2"},[a("a",{attrs:{href:"/"}},[this._v("Главная ")]),this._v(" / ")])}],!1,null,"4a5d6f41",null);a.default=o.exports}}]);