(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{57:function(t,a,i){"use strict";function e(t,a,i,e,s,r,n,l){var o,c="function"==typeof t?t.options:t;if(a&&(c.render=a,c.staticRenderFns=i,c._compiled=!0),e&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),n?(o=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},c._ssrRegister=o):s&&(o=l?function(){s.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:s),o)if(c.functional){c._injectStyles=o;var d=c.render;c.render=function(t,a){return o.call(a),d(t,a)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,o):[o]}return{exports:t,options:c}}i.d(a,"a",(function(){return e}))},58:function(t,a,i){"use strict";var e={name:"SidebarAdmin",data:function(){return{sideBarWidth:"14rem",sideBarMenuDisplay:"block",hiddenBtnText:"<"}},mounted:function(){this.load()},methods:{load:function(){document.documentElement.clientWidth<=900&&(this.sideBarWidth="0rem",this.sideBarMenuDisplay="none",this.hiddenBtnText=">")},hideSideBar:function(){"14rem"===this.sideBarWidth?(this.sideBarWidth="0rem",this.sideBarMenuDisplay="none",this.hiddenBtnText=">"):(this.sideBarWidth="14rem",this.sideBarMenuDisplay="block",this.hiddenBtnText="<")}}},s=i(57),r=Object(s.a)(e,(function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"d-flex"},[i("div",{staticClass:"iq-sidebar",style:{width:t.sideBarWidth}},[i("div",{attrs:{id:"sidebar-scrollbar"}},[i("nav",{staticClass:"iq-sidebar-menu",style:{display:t.sideBarMenuDisplay}},[i("ul",{staticClass:"iq-menu",attrs:{id:"iq-sidebar-toggle"}},[i("li",[i("router-link",{staticClass:"iq-waves-effect",attrs:{to:{name:"adminPanel.index"}}},[i("span",[t._v("Главная")])])],1),t._v(" "),i("li",{staticClass:"active"},[i("router-link",{staticClass:"iq-waves-effect",attrs:{to:{name:"adminPanel.articles"}}},[i("span",[t._v("Записи")])])],1),t._v(" "),i("li",[i("router-link",{staticClass:"iq-waves-effect",attrs:{to:{name:"adminPanel.categories"}}},[i("span",[t._v("Категории")])])],1),t._v(" "),i("li",[i("router-link",{staticClass:"iq-waves-effect",attrs:{to:{name:"adminPanel.users"}}},[i("span",[t._v("Пользователи")])])],1)])]),t._v(" "),i("div",[i("button",{attrs:{id:"sideBarHidden"},on:{click:function(a){return t.hideSideBar()}}},[t._v(t._s(t.hiddenBtnText))])])])])])}),[],!1,null,"c766ee08",null);a.a=r.exports},74:function(t,a,i){"use strict";i.r(a);var e={name:"Articles",components:{SideBarAdmin:i(58).a},data:function(){return{articles:[],categories:[],loading:!0,thisPage:1,lastPage:1,totalArticles:null,searchText:null,thisCategory:null}},mounted:function(){this.loadArticles(),this.loadCategories()},methods:{removeArticle:function(t){var a=this;confirm("Вы действительно хотите удалить запись?")&&api.call("delete","/api/article/"+t).then((function(i){var e=a.getArticleItem(t);a.articles.splice(e,1)}))},getArticleItem:function(t){var a=null;return this.articles.reduce((function(i,e,s){e.article_id===t&&(a=s)}),[]),a},loadArticles:function(t){var a=this;t?axios.get("/api/article/?categoryId="+t).then((function(t){a.articles=t.data.articles.data,a.lastPage=t.data.articles.last_page,a.totalArticles=t.data.articles.total,a.thisCategory=t.data.category.id,a.loading=!1})):axios.get("/api/article").then((function(t){a.articles=t.data.data,a.lastPage=t.data.last_page,a.totalArticles=t.data.total,a.thisCategory=null,a.loading=!1}))},loadCategories:function(){var t=this;axios.get("/api/v1/category").then((function(a){t.categories=a.data.data}))},nextPage:function(){this.thisPage+1<=this.lastPage&&(this.thisPage+=1,this.loadPageArticles(!1,this.thisPage))},backPage:function(){this.thisPage>1&&(this.thisPage-=1,this.loadPageArticles(!1,this.thisPage))},loadPageArticles:function(t,a){var i=this;t?axios.get("/api/article/?categoryId="+t+"&page="+a).then((function(t){i.articles=t.data.articles.data,i.lastPage=t.data.articles.last_page,i.totalArticles=t.data.articles.total,i.thisCategory=t.data.category.id,i.loading=!1})):axios.get("/api/article?page="+a).then((function(t){i.articles=t.data.data,i.loading=!1}))},search:function(){var t=this;this.loading=!0,axios.get("/api/articles/search?text=".concat(this.searchText)).then((function(a){t.articles=a.data.data,t.totalArticles=a.data.total,t.loading=!1}))}}},s=i(57),r=Object(s.a)(e,(function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"d-flex"},[i("SideBarAdmin"),t._v(" "),i("div",{staticClass:"admin-container ml-auto mr-auto mt-4 ml-lg-4 mr-lg-4"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-2"},[i("div",{staticClass:"iq-card"},[i("div",{staticClass:"iq-card-body"},[i("div",{staticClass:"iq-todo-page"},[i("form",{staticClass:"position-relative"},[i("div",{staticClass:"form-group mb-0"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"form-control todo-search",attrs:{type:"text",placeholder:"Поиск по записям"},domProps:{value:t.searchText},on:{input:[function(a){a.target.composing||(t.searchText=a.target.value)},function(a){return t.search()}]}}),t._v(" "),t._m(0)])]),t._v(" "),i("ul",{staticClass:"todo-task-list p-0 m-0"},[i("li",[i("ul",{staticClass:"sub-task  show mt-2 p-0",attrs:{id:"todo-task1"}},[i("li",{staticClass:"active"},[i("a",{attrs:{href:"#"},on:{click:function(a){return t.loadArticles()}}},[t._v(" Все категории ")])]),t._v(" "),t._l(t.categories,(function(a){return i("li",[i("a",{attrs:{href:"#"},on:{click:function(i){return t.loadArticles(a.categoryId)}}},[t._v(t._s(a.name))])])}))],2)])])])])])]),t._v(" "),i("div",{staticClass:"col-lg-10"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-12"},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-body"},[t.loading?i("spinner"):t._e(),t._v(" "),i("router-link",{staticClass:"btn btn-gradient-primary px-4 btn-rounded float-right mt-0 mb-3",attrs:{to:{name:"adminPanel.articlesAdd"}}},[t._v("Добавить новую запись")]),t._v(" "),t.loading?i("h4",{staticClass:"header-title mt-0"},[t._v("Записи (всего: загрузка...)")]):i("h4",{staticClass:"header-title mt-0"},[t._v("Записи (всего: "+t._s(t.totalArticles)+")")]),t._v(" "),i("div",{staticClass:"table-responsive dash-social"},[i("div",{staticClass:"dataTables_wrapper dt-bootstrap4 no-footer",attrs:{id:"datatable_wrapper"}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-12"},[i("table",{staticClass:"table dataTable no-footer",attrs:{id:"datatable",role:"grid","aria-describedby":"datatable_info"}},[t._m(1),t._v(" "),i("tbody",t._l(t.articles,(function(a){return i("tr",{attrs:{role:"row"}},[i("td",[t._v(t._s(a.article_id))]),t._v(" "),i("td",[i("router-link",{attrs:{to:{name:"article",params:{id:a.article_id}}}},[t._v(t._s(a.title))])],1),t._v(" "),i("td",[t._v(t._s(a.created_at))]),t._v(" "),i("td",[t._v(t._s(a.rating.rating))]),t._v(" "),i("td",[t._v(t._s(a.author.name))]),t._v(" "),i("td",[i("router-link",{attrs:{to:{name:"Category",params:{id:a.category.category_id}}}},[t._v(t._s(a.category.name))])],1),t._v(" "),i("td",[i("a",{staticClass:"mr-2",on:{click:function(i){return t.removeArticle(a.article_id)}}},[i("svg",{staticClass:"bi bi-eraser-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[i("path",{attrs:{d:"M8.086 2.207a2 2 0 0 1 2.828 0l3.879 3.879a2 2 0 0 1 0 2.828l-5.5 5.5A2 2 0 0 1 7.879 15H5.12a2 2 0 0 1-1.414-.586l-2.5-2.5a2 2 0 0 1 0-2.828l6.879-6.879zm.66 11.34L3.453 8.254 1.914 9.793a1 1 0 0 0 0 1.414l2.5 2.5a1 1 0 0 0 .707.293H7.88a1 1 0 0 0 .707-.293l.16-.16z"}})])]),t._v(" "),i("router-link",{attrs:{to:{name:"adminPanel.editArticle",params:{articleId:a.article_id}}}},[i("svg",{staticClass:"bi bi-pencil-square",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[i("path",{attrs:{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}}),t._v(" "),i("path",{attrs:{"fill-rule":"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"}})])])],1)])})),0)])])])])])],1)])])])])]),t._v(" "),i("div",{staticClass:"row mt-5"},[i("div",{staticClass:"col text-center"},[i("div",{staticClass:"block-27"},[t.thisCategory?i("ul",[i("li",[i("a",{on:{click:function(a){return t.backPage(t.thisCategory)}}},[t._v("<")])]),t._v(" "),t._l(t.lastPage,(function(a){return i("li",[i("a",{on:{click:function(i){t.loadPageArticles(t.thisCategory,a),t.thisPage=a}}},[t._v(t._s(a))])])})),t._v(" "),i("li",[i("a",{on:{click:function(a){return t.nextPage(t.thisCategory)}}},[t._v(">")])])],2):i("ul",[i("li",[i("a",{on:{click:function(a){return t.backPage()}}},[t._v("<")])]),t._v(" "),t._l(t.lastPage,(function(a){return i("li",[i("a",{on:{click:function(i){t.loadPageArticles(!1,a),t.thisPage=a}}},[t._v(t._s(a))])])})),t._v(" "),i("li",[i("a",{on:{click:function(a){return t.nextPage()}}},[t._v(">")])])],2)])])])])],1)}),[function(){var t=this.$createElement,a=this._self._c||t;return a("a",{staticClass:"search-link",attrs:{href:"#"}},[a("i",{staticClass:"ri-search-line"})])},function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("thead",[i("tr",{attrs:{role:"row"}},[i("th",{staticClass:"sorting_asc",staticStyle:{width:"216px"},attrs:{tabindex:"0","aria-controls":"datatable",rowspan:"1",colspan:"1","aria-sort":"ascending","aria-label":"Customer Name: activate to sort column descending"}},[t._v("Id")]),t._v(" "),i("th",{staticClass:"sorting",staticStyle:{width:"117.6px"},attrs:{tabindex:"0","aria-controls":"datatable",rowspan:"1",colspan:"1"}},[t._v("Название")]),t._v(" "),i("th",{staticClass:"sorting",staticStyle:{width:"87.6px"},attrs:{tabindex:"0","aria-controls":"datatable",rowspan:"1",colspan:"1"}},[t._v("Дата создания")]),t._v(" "),i("th",{staticClass:"sorting",staticStyle:{width:"125.2px"},attrs:{tabindex:"0","aria-controls":"datatable",rowspan:"1",colspan:"1"}},[t._v("Рейтинг")]),t._v(" "),i("th",{staticClass:"sorting",staticStyle:{width:"125.2px"},attrs:{tabindex:"0","aria-controls":"datatable",rowspan:"1",colspan:"1"}},[t._v("Автор")]),t._v(" "),i("th",{staticClass:"sorting",staticStyle:{width:"62.4px"},attrs:{tabindex:"0","aria-controls":"datatable",rowspan:"1",colspan:"1"}},[t._v("Категория")]),t._v(" "),i("th",{staticClass:"sorting",staticStyle:{width:"62.4px"},attrs:{tabindex:"0","aria-controls":"datatable",rowspan:"1",colspan:"1"}},[t._v("Редактировать")])])])}],!1,null,"3dcae790",null);a.default=r.exports}}]);